<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÎÇòÎ¨¥ÏúÑÌÇ§ Ïä§ÌÉÄÏùº ÏóêÎîîÌÑ∞</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --namu-green: #2db400;
            --namu-light-green: #e8f5e9;
            --namu-dark-green: #1e7e34;
            --border-color: #ccc;
            --text-color: #222;
            --bg-color: #fff;
            --table-header-bg: var(--namu-green);
        }
        body { font-family: 'Noto Sans KR', sans-serif; display: flex; height: 100vh; overflow: hidden; }

        .editor-panel { width: 420px; background: #fdfdfd; border-right: 1px solid #ddd; display: flex; flex-direction: column; height: 100vh; z-index: 10; box-shadow: 2px 0 10px rgba(0,0,0,0.03); }
        .tab-header { display: flex; background: white; border-bottom: 1px solid #eee; padding: 0 10px; }
        .tab-btn { flex: 1; padding: 14px 0; border: none; background: transparent; font-size: 13px; font-weight: 500; color: #888; cursor: pointer; transition: all 0.2s; border-bottom: 2px solid transparent; }
        .tab-btn:hover { color: var(--namu-green); }
        .tab-btn.active { color: var(--namu-green); border-bottom: 2px solid var(--namu-green); font-weight: 700; }
        .tab-content-container { flex: 1; overflow-y: auto; padding: 25px; }
        .tab-content { display: none; animation: fadeIn 0.3s ease; }
        .tab-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        .editor-panel h2 { color: #333; margin-bottom: 25px; font-size: 18px; font-weight: 700; display: flex; justify-content: space-between; align-items: center; }

        .profile-list-container { display: flex; flex-direction: column; gap: 8px; }
        .profile-row-item { display: flex; align-items: center; background: white; border: 1px solid #eee; border-radius: 8px; padding: 4px 8px; transition: all 0.2s; }
        .profile-row-item:hover { border-color: #ddd; box-shadow: 0 2px 8px rgba(0,0,0,0.03); }
        .profile-row-header { width: 30%; border-right: 1px solid #f0f0f0; padding-right: 8px; }
        .profile-row-value { flex: 1; padding-left: 8px; }
        .input-minimal { width: 100%; border: none; background: transparent; padding: 8px 4px; font-size: 13px; color: #444; font-family: inherit; }
        .input-minimal:focus { outline: none; color: #000; }
        .input-header { font-weight: 600; color: var(--namu-green); }
        .btn-icon-remove { background: none; border: none; color: #ccc; font-size: 18px; cursor: pointer; padding: 2px 8px; border-radius: 4px; transition: all 0.2s; line-height: 1; }
        .profile-row-item:hover .btn-icon-remove { color: #ff6b6b; }
        .btn-icon-remove:hover { background: #fff0f0; }
        .btn-add-dashed { width: 100%; padding: 10px; background: white; border: 1px dashed #ccc; border-radius: 8px; color: #888; font-size: 13px; cursor: pointer; transition: all 0.2s; margin-top: 10px; display: flex; align-items: center; justify-content: center; gap: 5px; }
        .btn-add-dashed:hover { border-color: var(--namu-green); color: var(--namu-green); background: #f9fdf9; }

        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; font-weight: 600; margin-bottom: 8px; color: #555; font-size: 12px; letter-spacing: -0.3px; }
        .form-group input[type="text"], .form-group input[type="number"], .form-group input[type="date"], .form-group textarea, .form-group select { width: 100%; padding: 10px 12px; border: 1px solid #ddd; border-radius: 6px; font-family: inherit; font-size: 14px; transition: all 0.2s; background: white; }
        .form-group input:focus, .form-group textarea:focus, .form-group select:focus { outline: none; border-color: var(--namu-green); box-shadow: 0 0 0 2px rgba(45, 180, 0, 0.1); }
        .form-group textarea { min-height: 120px; resize: vertical; line-height: 1.6; }

        .section-item { background: white; margin-bottom: 12px; border-radius: 8px; border: 1px solid #eee; box-shadow: 0 1px 3px rgba(0,0,0,0.03); transition: all 0.2s; overflow: hidden; }
        .section-item:hover { border-color: #ccc; box-shadow: 0 3px 10px rgba(0,0,0,0.05); }
        .section-header { display: flex; justify-content: space-between; align-items: center; padding: 12px 15px; background: #fff; border-bottom: 1px solid #f5f5f5; cursor: pointer; user-select: none; }
        .section-header:hover { background: #fafafa; }
        .section-title-wrap { display: flex; align-items: center; gap: 10px; flex: 1; }
        .toggle-icon { font-size: 10px; color: #bbb; transition: transform 0.2s; }
        .section-item.collapsed .toggle-icon { transform: rotate(-90deg); }
        .section-item.collapsed .section-content { display: none; }
        .section-content { padding: 15px; background: #fff; }
        .section-type { font-weight: 700; color: var(--namu-green); font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px; }
        .section-preview-text { font-size: 13px; color: #666; margin-left: 10px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 180px; }
        .btn-section-delete { background: none; border: none; color: #ccc; font-size: 20px; cursor: pointer; padding: 0 5px; line-height: 1; transition: color 0.2s; }
        .btn-section-delete:hover { color: #ff6b6b; }

        .color-input-group { display: flex; gap: 10px; align-items: center; }
        .color-input-group input[type="color"] { width: 40px; height: 40px; border: none; padding: 0; background: none; cursor: pointer; border-radius: 4px; overflow: hidden; }
        .color-input-group input[type="color"]::-webkit-color-swatch-wrapper { padding: 0; }
        .color-input-group input[type="color"]::-webkit-color-swatch { border: 1px solid #ddd; border-radius: 4px; }

        /* PREVIEW PANEL */
        .preview-panel { flex: 1; overflow-y: auto; background: #f0f0f0; }
        #wiki-preview { max-width: 1000px; width: 1000px; margin: 0 auto; padding: 50px 40px; box-sizing: border-box; background: white; min-height: 100vh; box-shadow: 0 0 20px rgba(0,0,0,0.05); }

        .wiki-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #ccc; padding-bottom: 12px; margin-bottom: 20px; }
        .wiki-title { font-size: 32px; font-weight: 700; color: var(--text-color); margin: 0; letter-spacing: -0.5px; }
        .wiki-header-menu { display: flex; gap: 15px; align-items: center; }
        .wiki-header-menu span { color: #666; font-size: 13px; cursor: default; }
        .wiki-header-menu span:not(:last-child)::after { content: ''; display: inline-block; width: 1px; height: 10px; background: #ccc; margin-left: 15px; vertical-align: middle; }
        
        .wiki-meta { display: flex; gap: 15px; font-size: 12px; color: #666; margin-bottom: 15px; }
        .wiki-category { background: white !important; padding: 8px 12px; border-radius: 4px; margin-bottom: 20px; font-size: 13px; color: #444; border: 1px solid #ccc; }
        .wiki-category-item { color: var(--namu-green); font-weight: 500; }

        .wiki-content { display: flex; gap: 30px; align-items: flex-start; margin-bottom: 40px; }
        .wiki-main { flex: 1; min-width: 0; }
        
        /* Î™©Ï∞® ÏàòÏ†ï Î∂ÄÎ∂Ñ */
        .wiki-toc { background: white; padding: 15px; margin-bottom: 30px; border: 1px solid #ccc; display: inline-block; min-width: 200px; }
        .wiki-toc-title { 
            font-size: 16px; 
            font-weight: 700; 
            color: #333; 
            margin-bottom: 10px; 
            text-align: center;
            /* Ï∫°Ï≤ò Ïãú Í∞ïÏ†ú Î†åÎçîÎßÅÏùÑ ÏúÑÌïú ÏàòÏ†ï */
            background: white;
            position: relative;
            z-index: 10;
        }
        .toc-item { padding: 3px 0; font-size: 13px; color: #333; display: block; }
        .toc-number { color: var(--namu-green); font-weight: 700; margin-right: 5px; }
        .toc-text { color: #000 !important; }
        .toc-indent-2 { margin-left: 15px; }
        .toc-indent-3 { margin-left: 30px; }

        .profile-box { width: 350px; background: white; border: 3px solid var(--namu-green); overflow: hidden; position: sticky; top: 20px; }
        .profile-box.capturing { position: static !important; }

        .profile-image-container { width: 100%; height: 350px; background-color: #f8f8f8; background-position: center; background-size: cover; background-repeat: no-repeat; display: flex; align-items: center; justify-content: center; color: #aaa; font-size: 13px; }
        
        .profile-table { width: 100%; border-collapse: collapse; }
        .profile-table th, .profile-table td { border-bottom: 1px solid #ccc; } 
        .profile-table tr:last-child th, .profile-table tr:last-child td { border-bottom: none; }
        .profile-table th { background: var(--table-header-bg); color: #222; padding: 6px 10px; text-align: center; font-weight: 600; width: 35%; font-size: 13px; }
        .profile-table td { padding: 6px 10px; background: white; line-height: 1.5; font-size: 13px; }

        .wiki-heading { font-size: 24px; font-weight: 700; color: var(--text-color); margin-bottom: 15px; padding-bottom: 8px; border-bottom: 1px solid #ccc; margin-top: 30px; }
        .wiki-heading-2 { font-size: 20px; margin-top: 25px; border-bottom: 1px solid #ccc; padding-bottom: 8px; margin-bottom: 10px; font-weight: 700; color: var(--text-color); }
        .wiki-heading-3 { font-size: 18px; margin-top: 20px; font-weight: 700; color: var(--text-color); }
        .section-number { color: var(--namu-green); margin-right: 8px; }
        
        .wiki-text { line-height: 1.8; color: #333; margin-bottom: 15px; font-size: 15px; }
        .wiki-text blockquote { border-left: 4px solid var(--namu-green); padding-left: 15px; margin: 10px 0; color: #666; background: #f9f9f9; padding: 10px; display: inline-block; }

        .intro-table { width: 700px; margin: 20px auto; border-collapse: separate; border-spacing: 0; background: var(--namu-green); padding: 0 0 10px; text-align: center; border-radius: 10px; overflow: hidden; }
        .intro-table td { padding: 5px; border: none; }
        .intro-row1 { display: flex; justify-content: center; align-items: center; padding: 15px 0 10px; color: white; }
        .intro-divider { font-size: 32px; font-weight: 100; margin: 0 10px; color: #222; position: relative; top: -3px;}
        .intro-name { flex: 0 0 auto; font-size: 18px; font-weight: 700; display: flex; flex-direction: column; align-items: flex-start; text-align: left; color: #222; }
        .intro-name-en { font-size: 20px; font-weight: 700; }
        .intro-name-ko { font-size: 14px; font-weight: 400; }
        .intro-members { display: flex; justify-content: space-between; border-bottom: 2px solid rgba(0,0,0,0.1); padding: 0 20px 8px; margin: 0 10px; color: #222; }
        .member-item { font-size: 13px; }
        .intro-links { display: flex; justify-content: space-around; gap: 10px; padding: 10px 0 5px; color: #222; }
        .intro-link-item { font-size: 13px; font-weight: 700; }

        .wiki-table { width: 100%; border-collapse: collapse; margin: 20px 0; border: 2px solid var(--namu-green); }
        .wiki-table th { background: var(--table-header-bg); padding: 8px; border: 1px solid #ccc; font-weight: 600; font-size: 14px; color: #222; }
        .wiki-table td { padding: 8px; border: 1px solid #ccc; background: white; font-size: 14px; }
        .table-divider { border: none; border-top: 1px solid #aaa; margin: 8px 0; }

        .action-buttons { position: fixed; bottom: 30px; right: 30px; display: flex; flex-direction: column-reverse; gap: 15px; z-index: 100; }
        .fab-btn { width: 50px; height: 50px; border-radius: 50%; background: white; border: 1px solid #ddd; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.1); transition: all 0.3s; }
        .fab-btn:hover { transform: translateY(-3px); box-shadow: 0 6px 20px rgba(0,0,0,0.15); border-color: var(--namu-green); }
        .fab-btn svg { width: 20px; height: 20px; stroke: #555; }
        .fab-btn:hover svg { stroke: var(--namu-green); }

        .capture-menu { position: absolute; bottom: 60px; right: 0; background: white; border-radius: 8px; padding: 5px; box-shadow: 0 5px 20px rgba(0,0,0,0.15); display: flex; flex-direction: column; gap: 5px; opacity: 0; visibility: hidden; transition: all 0.2s; min-width: 120px; }
        .capture-menu.open { opacity: 1; visibility: visible; bottom: 65px; }
        .capture-item { padding: 8px 12px; font-size: 13px; cursor: pointer; border-radius: 4px; color: #333; text-align: left; background: none; border: none; }
        .capture-item:hover { background: #f0f0f0; color: var(--namu-green); font-weight: 500; }

        .add-section-container { margin: 30px 0; text-align: center; position: relative; }
        .add-section-btn { width: 40px; height: 40px; border-radius: 50%; background: var(--namu-green); color: white; border: none; font-size: 24px; cursor: pointer; transition: transform 0.3s; display: flex; align-items: center; justify-content: center; margin: 0 auto; box-shadow: 0 4px 10px rgba(45, 180, 0, 0.3); }
        .add-section-btn:hover { transform: rotate(90deg) scale(1.1); }
        .add-section-menu { position: absolute; top: 50px; left: 50%; transform: translateX(-50%); background: white; border-radius: 50px; padding: 10px 25px; box-shadow: 0 5px 20px rgba(0,0,0,0.15); display: flex; gap: 20px; opacity: 0; visibility: hidden; transition: all 0.2s; z-index: 50; }
        .add-section-menu.open { opacity: 1; visibility: visible; top: 55px; }
        
        .menu-item-btn { background: transparent; border: none; cursor: pointer; padding: 0; transition: transform 0.2s; opacity: 0.7; }
        .menu-item-btn:hover { opacity: 1; transform: scale(1.1); }
        .menu-item-btn svg { width: 28px; height: 28px; stroke: #444; }
        .menu-item-btn:hover svg { stroke: var(--namu-green); }

        .text-toolbar { display: flex; gap: 5px; margin-bottom: 8px; flex-wrap: wrap; padding: 5px; background: #f1f3f5; border-radius: 4px; }
        .toolbar-btn { width: 32px; height: 32px; padding: 0; border: 1px solid #ced4da; background: white; border-radius: 4px; cursor: pointer; font-size: 13px; font-weight: 600; color: #444; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .toolbar-btn:hover { background: #e9ecef; color: var(--namu-green); border-color: var(--namu-green); }

        .modal-btn { padding: 8px 16px; border-radius: 4px; font-size: 13px; font-weight: 500; cursor: pointer; border: 1px solid #ddd; }
        .modal-btn.primary { background: var(--namu-green); color: white; border-color: var(--namu-green); }
        .modal-btn.secondary { background: white; color: #555; }
        .modal-btn.danger { background: white; color: #ff6b6b; border-color: #ffdede; }
        .modal-btn:hover { opacity: 0.9; transform: translateY(-1px); }

        .sns-group { display: flex; gap: 15px; margin-top: 5px; }
        .sns-toggle { cursor: pointer; opacity: 0.3; transition: all 0.2s; border: 2px solid transparent; border-radius: 12px; padding: 5px; }
        .sns-toggle:hover { opacity: 0.6; background: #f5f5f5; }
        .sns-toggle input { display: none; }
        .sns-toggle:has(input:checked) { opacity: 1; border-color: var(--namu-green); background: #f0fdf0; }
        .sns-icon { width: 28px; height: 28px; display: block; }

        .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.4); backdrop-filter: blur(3px); display: none; align-items: center; justify-content: center; z-index: 2000; }
        .modal-overlay.active { display: flex; animation: fadeIn 0.2s; }
        .modal-window { background: white; width: 90%; max-width: 1000px; height: 80vh; border-radius: 16px; display: flex; flex-direction: column; box-shadow: 0 20px 50px rgba(0,0,0,0.2); overflow: hidden; }
        .modal-header { padding: 15px 25px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; background: #fff; }
        .modal-body { flex: 1; overflow: auto; padding: 25px; background: #f9f9f9; }
        .modal-footer { padding: 15px 25px; border-top: 1px solid #eee; display: flex; justify-content: flex-end; gap: 10px; background: #fff; }

        .time-mode-switch { display: flex; background: #f0f0f0; padding: 3px; border-radius: 6px; margin-bottom: 10px; }
        .time-mode-btn { flex: 1; border: none; background: transparent; padding: 6px; font-size: 12px; cursor: pointer; border-radius: 4px; color: #666; font-weight: 500; }
        .time-mode-btn.active { background: white; color: var(--namu-green); font-weight: 700; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }

        .section-reorder-btn { border: 1px solid #eee; background: white; color: #555; padding: 4px 10px; border-radius: 20px; font-size: 12px; cursor: pointer; display: inline-flex; align-items: center; gap: 5px; margin-left: 10px; vertical-align: middle; transition: all 0.2s;}
        .section-reorder-btn:hover { border-color: var(--namu-green); color: var(--namu-green); }

        .reorder-list { list-style: none; padding: 0; }
        .reorder-item { display: flex; align-items: center; padding: 12px 15px; background: white; border: 1px solid #eee; margin-bottom: 8px; border-radius: 8px; cursor: grab; transition: all 0.2s; }
        .reorder-item:hover { border-color: var(--namu-green); transform: translateX(2px); }
        .reorder-handle { margin-right: 15px; color: #ccc; font-size: 20px; }
        
        .wiki-footnotes { margin-top: 40px; border-top: 1px solid #ddd; padding-top: 20px; }
        .footnote-item { margin-bottom: 5px; font-size: 13px; color: #333; }

        /* Emoji List */
        .emoji-list { display: flex; gap: 5px; margin-top: 10px; display: none; }
        .emoji-list.show { display: flex; }
        .emoji-btn { font-size: 20px; background: none; border: 1px solid #eee; cursor: pointer; padding: 5px; border-radius: 4px; }
        .emoji-btn:hover { background: #f0f0f0; }
    </style>
</head>
<body>
    <div class="editor-panel">
        <div class="tab-header">
            <button class="tab-btn active" onclick="openTab('basic')">Í∏∞Î≥∏</button>
            <button class="tab-btn" onclick="openTab('intro')">ÏÜåÍ∞úÌëú</button>
            <button class="tab-btn" onclick="openTab('profile')">ÌîÑÎ°úÌïÑ</button>
            <button class="tab-btn" onclick="openTab('sections')">ÏÑπÏÖò</button>
            <button class="tab-btn" onclick="openTab('design')">ÌÖåÎßà</button>
        </div>

        <div class="tab-content-container">
            <!-- Basic -->
            <div id="tab-basic" class="tab-content active">
                <h2>üìù Í∏∞Î≥∏ Ï†ïÎ≥¥</h2>
                <div class="form-group"><label>Ï†úÎ™©</label><input type="text" id="pageTitle" placeholder="ÌéòÏù¥ÏßÄ Ï†úÎ™©" value="RIIZE"></div>
                <div class="form-group"><label>Î∂ÑÎ•ò</label><input type="text" id="categories" placeholder="Ïòà: K-POP, ÏïÑÏù¥Îèå" value="K-POP, Î≥¥Ïù¥Í∑∏Î£π, SM"></div>
                <div class="form-group"><label>ÏµúÍ∑º ÏàòÏ†ï</label><div class="time-mode-switch"><button class="time-mode-btn active" onclick="setTimeMode('realtime')">Ïã§ÏãúÍ∞Ñ</button><button class="time-mode-btn" onclick="setTimeMode('manual')">ÏàòÎèô</button></div><input type="text" id="lastModified" value="2025-12-06 15:30:25" disabled></div>
            </div>

            <!-- Intro -->
            <div id="tab-intro" class="tab-content">
                <h2>üé§ ÏÜåÍ∞ú Ìëú</h2>
                <div class="form-group"><label>Î°úÍ≥†</label><div class="image-upload-group"><input type="file" id="introImageFile" accept="image/*"><input type="text" id="introImageUrl" placeholder="URL" style="margin-top:5px"></div></div>
                <div class="form-group"><label>Í∑∏Î£πÎ™Ö(EN)</label><input type="text" id="introGroupNameEn" value="RIIZE"></div>
                <div class="form-group"><label>Í∑∏Î£πÎ™Ö(KO)</label><input type="text" id="introGroupNameKo" value="ÎùºÏù¥Ï¶à"></div>
                <div class="form-group"><label>Î©§Î≤Ñ</label><input type="text" id="introMembers" value="ÏáºÌÉÄÎ°ú, ÏùÄÏÑù, ÏÑ±Ï∞¨, ÏõêÎπà, ÏäπÌïú, Ïï§ÌÜ§"></div>
                <div class="form-group"><label>Ìó§Îçî ÏÉâ</label><select id="headerTextColor"><option value="#222" selected>Í≤ÄÏ†ï</option><option value="#fff">Ìù∞ÏÉâ</option></select></div>
            </div>

            <!-- Profile -->
            <div id="tab-profile" class="tab-content">
                <h2>üë§ ÌîÑÎ°úÌïÑ</h2>
                <div class="form-group"><label>Ïù¥ÎØ∏ÏßÄ</label><input type="file" id="profileImage" accept="image/*"><input type="text" id="profileImageUrl" placeholder="URL" style="margin-top:5px"></div>
                <div class="form-group"><label>Îç∞Î∑îÏùº</label><input type="date" id="debutDate" value="2023-09-04"><div id="debutDaysInfo" style="font-size:12px;color:#888;margin-top:4px"></div></div>
                <div class="form-group"><label>SNS</label><div class="sns-group"><label class="sns-toggle"><input type="checkbox" id="snsYoutube" onchange="updateSNSLinks()"><img src="https://i.imgur.com/5p2rB6Y.png" class="sns-icon"></label><label class="sns-toggle"><input type="checkbox" id="snsX" onchange="updateSNSLinks()"><img src="https://i.imgur.com/Y18hMJ6.png" class="sns-icon"></label><label class="sns-toggle"><input type="checkbox" id="snsInstagram" onchange="updateSNSLinks()"><img src="https://i.imgur.com/xon7TFi.png" class="sns-icon"></label></div></div>
                <label style="font-weight:600;font-size:12px;color:#555;margin-bottom:8px;display:block">Ìï≠Î™©</label>
                <div id="profile-rows-list" class="profile-list-container"></div>
                <button class="btn-add-dashed" onclick="addProfileRow()"><span>+ Ìï≠Î™© Ï∂îÍ∞Ä</span></button>
            </div>

            <!-- Sections -->
            <div id="tab-sections" class="tab-content">
                <h2>üìÑ Î≥∏Î¨∏ ÏÑπÏÖò<button class="section-reorder-btn" onclick="openReorderModal()"><span>‚áÖ ÏàúÏÑú Î≥ÄÍ≤Ω</span></button></h2>
                <div id="sections-list" class="sortable-sections"></div>
                <div class="add-section-container">
                    <button class="add-section-btn" onclick="toggleSectionMenu()">+</button>
                    <div class="add-section-menu" id="sectionMenu">
                        <button class="menu-item-btn" onclick="addSection('combined')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#444" stroke-width="1.5"><path d="M12 20h9M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path></svg></button>
                        <button class="menu-item-btn" onclick="addSection('table')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#444" stroke-width="1.5"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line><line x1="9" y1="21" x2="9" y2="9"></line></svg></button>
                        <button class="menu-item-btn" onclick="addSection('image')"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#444" stroke-width="1.5"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg></button>
                    </div>
                </div>
            </div>

            <!-- Theme -->
            <div id="tab-design" class="tab-content">
                <h2>üé® ÌÖåÎßà ÏÑ§Ï†ï</h2>
                <div class="form-group"><label>Î©îÏù∏ Ïª¨Îü¨</label><div class="color-input-group"><input type="color" id="themeColor" value="#2db400"><input type="text" id="themeColorText" value="#2db400"></div></div>
            </div>
        </div>
    </div>

    <!-- Preview -->
    <div class="preview-panel">
        <div id="wiki-preview">
            <div class="wiki-header">
                <h1 class="wiki-title">RIIZE</h1>
                <div class="wiki-header-menu">
                    <span><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:-2px; margin-right:3px"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg> Ìé∏Ïßë</span>
                    <span><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:-2px; margin-right:3px"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg> ÌÜ†Î°†</span>
                    <span><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:-2px; margin-right:3px"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> Ïó≠ÏÇ¨</span>
                    <span style="font-weight:700">‚ãØ</span>
                </div>
            </div>
            <div class="wiki-meta"><span id="lastModifiedPreview">ÏµúÍ∑º ÏàòÏ†ï: ...</span></div>
            <div id="wikiCategories" class="wiki-category">...</div>

            <div id="capture-area-top">
                <table class="intro-table">
                    <tr><td>
                        <div class="intro-row1">
                            <div class="intro-image" id="introImagePreview">Î°úÍ≥†</div>
                            <div class="intro-divider">|</div>
                            <div class="intro-name">
                                <div class="intro-name-en" id="introGroupNameEnPreview">RIIZE</div>
                                <div class="intro-name-ko" id="introGroupNameKoPreview">ÎùºÏù¥Ï¶à</div>
                            </div>
                        </div>
                        <div class="intro-members" id="introMembersPreview"></div>
                        <div class="intro-links"><span class="intro-link-item">[ ÌïúÍµ≠ ÏùåÎ∞ò ]</span><span class="intro-link-item">[ Ï∞∏Ïó¨ ÏùåÎ∞ò ]</span><span class="intro-link-item">[ Í¥ÄÎ†® Î¨∏ÏÑú ]</span></div>
                    </td></tr>
                </table>

                <div class="wiki-content">
                    <div class="wiki-main">
                        <div class="wiki-toc">
                            <div class="wiki-toc-title">Î™©Ï∞®</div>
                            <div id="tocList"></div> 
                        </div>
                    </div>
                    <aside class="profile-box">
                        <div style="background: var(--namu-green); padding: 10px;">
                            <div style="display: flex; align-items: center; justify-content: center;">
                                <div id="profileIntroImagePreview">Î°úÍ≥†</div>
                                <div class="profile-intro-divider" style="font-size: 32px; color: #222; font-weight: 100; margin: 0 8px; position:relative; top:-2px;">|</div>
                                <div style="font-size: 18px; font-weight: 700; display: flex; flex-direction: column; text-align: left; color: #222;">
                                    <div id="profileIntroNameEnPreview">RIIZE</div>
                                    <div id="profileIntroNameKoPreview" style="font-size: 14px; font-weight: 400;">ÎùºÏù¥Ï¶à</div>
                                </div>
                            </div>
                        </div>
                        <div class="profile-image-container" id="previewProfileImageContainer">ÌîÑÎ°úÌïÑ Ïù¥ÎØ∏ÏßÄ</div>
                        <table class="profile-table" id="previewProfileTable"></table>
                    </aside>
                </div>
            </div>

            <div class="wiki-full-content">
                <div id="dynamicContent"></div>
            </div>
        </div>
    </div>

    <!-- Buttons -->
    <div class="action-buttons">
        <div style="position:relative">
            <button class="fab-btn" onclick="toggleCaptureMenu()" title="Ïù¥ÎØ∏ÏßÄ Ï†ÄÏû•"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg></button>
            <div class="capture-menu" id="captureMenu">
                <button class="capture-item" onclick="captureWiki('full')">Ï†ÑÏ≤¥ Ï†ÄÏû•</button>
                <button class="capture-item" onclick="captureWiki('top')">ÏÉÅÎã®Î∂Ä (ÌîÑÎ°úÌïÑ)</button>
                <button class="capture-item" onclick="captureWiki('body')">Î≥∏Î¨∏ (ÏÑπÏÖò)</button>
            </div>
        </div>
        <button class="fab-btn" onclick="saveWiki()" title="ÌååÏùº Ï†ÄÏû•"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></svg></button>
        <button class="fab-btn" onclick="loadWiki()" title="Î∂àÎü¨Ïò§Í∏∞"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg></button>
    </div>

    <!-- Modals -->
    <div class="modal-overlay" id="tableModal">
        <div class="modal-window">
            <div class="modal-header"><h3>Ìëú Ìé∏Ïßë</h3><button onclick="closeTableModal()" style="border:none;background:none;font-size:24px;cursor:pointer">&times;</button></div>
            <div class="modal-body"><div id="modalTableEditorContent"></div></div>
            <div class="modal-footer"><button class="modal-btn secondary" onclick="closeTableModal()">Ï∑®ÏÜå</button><button class="modal-btn primary" onclick="saveTableFromModal()">Ï†ÄÏû•</button></div>
        </div>
    </div>

    <div class="modal-overlay" id="reorderModal">
        <div class="modal-window" style="width:400px; height:60vh;">
            <div class="modal-header"><h3>ÏàúÏÑú Î≥ÄÍ≤Ω</h3><button onclick="closeReorderModal()" style="border:none;background:none;font-size:24px;cursor:pointer">&times;</button></div>
            <div class="modal-body"><ul id="reorderList" class="reorder-list"></ul></div>
            <div class="modal-footer"><button class="modal-btn secondary" onclick="closeReorderModal()">Ï∑®ÏÜå</button><button class="modal-btn primary" onclick="saveReorder()">Ï†ÅÏö©</button></div>
        </div>
    </div>

    <script>
        let sections = [];
        let sectionCounter = 0;
        let profileRows = [];
        let profileRowCounter = 0;
        let footnotes = [];
        let timeMode = 'realtime';
        let timeInterval;
        let currentEditingTableId = null;

        function init() { startRealTimeClock(); initializeProfile(); }

        function setTimeMode(mode) {
            timeMode = mode;
            const btns = document.querySelectorAll('.time-mode-btn');
            btns.forEach(b => b.classList.remove('active'));
            if (mode === 'realtime') { btns[0].classList.add('active'); document.getElementById('lastModified').disabled = true; startRealTimeClock(); }
            else { btns[1].classList.add('active'); document.getElementById('lastModified').disabled = false; stopRealTimeClock(); }
        }

        function startRealTimeClock() { stopRealTimeClock(); updateTimeDisplay(); timeInterval = setInterval(updateTimeDisplay, 1000); }
        function stopRealTimeClock() { if(timeInterval) clearInterval(timeInterval); }
        function updateTimeDisplay() {
            const now = new Date();
            const format = `${now.getFullYear()}-${String(now.getMonth()+1).padStart(2,'0')}-${String(now.getDate()).padStart(2,'0')} ${String(now.getHours()).padStart(2,'0')}:${String(now.getMinutes()).padStart(2,'0')}:${String(now.getSeconds()).padStart(2,'0')}`;
            document.getElementById('lastModified').value = format;
            document.getElementById('lastModifiedPreview').textContent = `ÏµúÍ∑º ÏàòÏ†ï: ${format}`;
        }

        function openTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(`tab-${tabName}`).classList.add('active');
            event.currentTarget.classList.add('active');
        }

        function toggleSectionMenu() { document.getElementById('sectionMenu').classList.toggle('open'); }
        function toggleCaptureMenu() { document.getElementById('captureMenu').classList.toggle('open'); }

        function initializeProfile() {
            addProfileRow('ÏÜåÏÜç', 'SM Entertainment');
            addProfileRow('Î©§Î≤Ñ', '6Î™Ö');
            addProfileRow('Ïû•Î•¥', 'K-POP, R&B');
        }

        function addProfileRow(header = '', value = '') {
            profileRowCounter++;
            const row = { id: profileRowCounter, header: header, value: value };
            profileRows.push(row);
            renderProfileRowEditor(row);
            updateProfilePreview();
        }

        function renderProfileRowEditor(row) {
            const container = document.getElementById('profile-rows-list');
            const div = document.createElement('div');
            div.className = 'profile-row-item';
            div.id = `profile-row-${row.id}`;
            if (row.header === 'Îç∞Î∑î') { div.style.display = 'none'; }
            else {
                div.innerHTML = `
                    <div class="profile-row-header"><input type="text" class="input-minimal input-header" placeholder="Ìï≠Î™©" value="${row.header}" onkeyup="updateProfileRow(${row.id}, 'header', this.value)"></div>
                    <div class="profile-row-value"><input type="text" class="input-minimal" placeholder="ÎÇ¥Ïö©" value="${row.value}" onkeyup="updateProfileRow(${row.id}, 'value', this.value)"></div>
                    <button class="btn-icon-remove" onclick="removeProfileRow(${row.id})">&times;</button>
                `;
            }
            container.appendChild(div);
        }

        function updateProfileRow(id, field, val) {
            const row = profileRows.find(r => r.id === id);
            if(row) { row[field] = val; updateProfilePreview(); }
        }

        function removeProfileRow(id) {
            profileRows = profileRows.filter(r => r.id !== id);
            document.getElementById(`profile-row-${id}`).remove();
            updateProfilePreview();
        }

        function updateProfilePreview() {
            const table = document.getElementById('previewProfileTable');
            let html = '';
            profileRows.forEach(row => {
                if (row.header || row.value) { html += `<tr><th>${row.header}</th><td>${row.value}</td></tr>`; }
            });
            const links = [];
            if(document.getElementById('snsYoutube').checked) links.push('<img src="https://i.imgur.com/5p2rB6Y.png" style="width:20px;vertical-align:middle">');
            if(document.getElementById('snsX').checked) links.push('<img src="https://i.imgur.com/Y18hMJ6.png" style="width:20px;vertical-align:middle">');
            if(document.getElementById('snsInstagram').checked) links.push('<img src="https://i.imgur.com/xon7TFi.png" style="width:20px;vertical-align:middle">');
            if(links.length > 0) { html += `<tr><th>ÎßÅÌÅ¨</th><td style="text-align:center">${links.join(' <span style="color:#ddd;margin:0 5px">|</span> ')}</td></tr>`; }
            table.innerHTML = html;
        }

        function updateSNSLinks() { updateProfilePreview(); }

        // Event Listeners
        ['categories', 'introGroupNameEn', 'introGroupNameKo', 'introMembers'].forEach(id => document.getElementById(id).addEventListener('input', updatePreviewAll));
        document.getElementById('pageTitle').addEventListener('input', function() {
            const val = this.value;
            document.querySelector('.wiki-title').textContent = val;
            document.getElementById('introGroupNameEn').value = val;
            updatePreviewAll();
        });
        document.getElementById('headerTextColor').addEventListener('change', updatePreviewAll);
        document.getElementById('themeColor').addEventListener('input', function() { document.getElementById('themeColorText').value = this.value; applyTheme(this.value); });
        document.getElementById('themeColorText').addEventListener('input', function() { document.getElementById('themeColor').value = this.value; applyTheme(this.value); });

        function setupImageInput(inputId, urlId, previewId, bgId) {
            document.getElementById(inputId).addEventListener('change', function(e) {
                const file = e.target.files[0];
                if(file) {
                    const r = new FileReader();
                    r.onload = evt => {
                        const res = evt.target.result;
                        document.getElementById(urlId).value = res;
                        if(bgId) {
                            document.getElementById(bgId).innerText = ''; // TEXT REMOVAL
                            document.getElementById(bgId).style.backgroundImage = `url('${res}')`;
                        } else {
                            const img = `<img src="${res}" style="max-height:60px;border-radius:6px">`;
                            document.getElementById(previewId).innerHTML = img;
                            document.getElementById('profileIntroImagePreview').innerHTML = img;
                        }
                    };
                    r.readAsDataURL(file);
                }
            });
            document.getElementById(urlId).addEventListener('input', function() {
                const val = this.value;
                if(val) {
                    if(bgId) {
                        document.getElementById(bgId).innerText = '';
                        document.getElementById(bgId).style.backgroundImage = `url('${val}')`;
                    } else {
                        const img = `<img src="${val}" style="max-height:60px;border-radius:6px">`;
                        document.getElementById(previewId).innerHTML = img;
                        document.getElementById('profileIntroImagePreview').innerHTML = img;
                    }
                }
            });
        }
        setupImageInput('introImageFile', 'introImageUrl', 'introImagePreview', null);
        setupImageInput('profileImage', 'profileImageUrl', 'profileImagePreview', 'previewProfileImageContainer');

        document.getElementById('debutDate').addEventListener('change', function() {
            const d = new Date(this.value);
            const diff = Math.floor((new Date() - d) / (1000*60*60*24));
            const txt = `${d.getFullYear()}ÎÖÑ ${d.getMonth()+1}Ïõî ${d.getDate()}Ïùº`;
            let row = profileRows.find(r => r.header === 'Îç∞Î∑î');
            if(!row) { row = {id: ++profileRowCounter, header:'Îç∞Î∑î', value:''}; profileRows.unshift(row); renderProfileRowEditor(row); }
            row.value = `${txt}<br><span style="font-size:12px;color:#666">(Îç∞Î∑îÏùºÎ°úÎ∂ÄÌÑ∞ <strong>+${diff}</strong>Ïùº)</span>`;
            updateProfilePreview();
            document.getElementById('debutDaysInfo').textContent = `+${diff}Ïùº`;
        });
        document.getElementById('debutDate').dispatchEvent(new Event('change'));

        function applyTheme(color) {
            document.documentElement.style.setProperty('--namu-green', color);
            document.documentElement.style.setProperty('--table-header-bg', color);
            const r=parseInt(color.substr(1,2),16), g=parseInt(color.substr(3,2),16), b=parseInt(color.substr(5,2),16);
            document.documentElement.style.setProperty('--namu-light-green', `rgba(${r},${g},${b},0.1)`);
        }

        function updatePreviewAll() {
            const color = document.getElementById('headerTextColor').value;
            const en = document.getElementById('introGroupNameEn').value;
            const ko = document.getElementById('introGroupNameKo').value;
            document.getElementById('introGroupNameEnPreview').textContent = en;
            document.getElementById('introGroupNameKoPreview').textContent = ko;
            document.getElementById('profileIntroNameEnPreview').textContent = en;
            document.getElementById('profileIntroNameKoPreview').textContent = ko;
            document.getElementById('introGroupNameEnPreview').style.color = color;
            document.getElementById('introGroupNameKoPreview').style.color = color;
            document.getElementById('profileIntroNameEnPreview').style.color = color;
            document.getElementById('profileIntroNameKoPreview').style.color = color;
            document.querySelector('.intro-divider').style.color = color;
            document.querySelector('.profile-intro-divider').style.color = color;
            document.querySelectorAll('.profile-table th').forEach(th => th.style.color = color);
            document.querySelectorAll('.wiki-table th').forEach(th => th.style.color = color);
            
            document.querySelectorAll('.intro-link-item').forEach(item => item.style.color = color);
            const borderColor = color === '#fff' ? 'rgba(255,255,255,0.3)' : 'rgba(0,0,0,0.2)';
            document.querySelector('.intro-members').style.borderBottomColor = borderColor;

            const mems = document.getElementById('introMembers').value.split(',').filter(m=>m.trim()).map(m => `<div class="member-item">${m.trim()}</div>`).join('');
            document.getElementById('introMembersPreview').innerHTML = mems;
            document.querySelectorAll('.intro-table .member-item').forEach(el => el.style.color = color);
            const cats = document.getElementById('categories').value.split(',').filter(c=>c.trim()).map(c=>`<span class="wiki-category-item">${c.trim()}</span>`).join(' | ');
            document.getElementById('wikiCategories').innerHTML = `<span style="color:#222;font-weight:normal">Î∂ÑÎ•ò:</span> ${cats}`;
        }

        function addSection(type) {
            document.getElementById('sectionMenu').classList.remove('open');
            const section = { id: ++sectionCounter, type: type, level: 1, title: '', content: '', collapseLink: '', imageUrl: '', imageFile: null, imageWidth: '', tableData: { cols: 2, rows: 2, width: 700, data: [['',''],['','']], cellStyles: {}, mergeInfo: [] }, isCollapsed: false };
            sections.push(section);
            renderSectionEditor(section);
            updatePreview();
        }

        function toggleSection(id) {
            const div = document.getElementById(`section-${id}`);
            div.classList.toggle('collapsed');
            const s = sections.find(x => x.id === id);
            if(s) s.isCollapsed = div.classList.contains('collapsed');
        }

        function renderSectionEditor(s) {
            const container = document.getElementById('sections-list');
            const div = document.createElement('div');
            div.className = `section-item ${s.isCollapsed ? 'collapsed' : ''}`;
            div.id = `section-${s.id}`;
            let label = s.type === 'combined' ? 'ÌÜµÌï© ÏÑπÏÖò' : (s.type === 'table' ? 'Ìëú' : 'Ïù¥ÎØ∏ÏßÄ');
            let inner = `<div class="section-header" onclick="toggleSection(${s.id})"><div class="section-title-wrap"><span class="toggle-icon">‚ñº</span><span class="section-type">${label}</span><span class="section-preview-text" id="preview-title-${s.id}">${s.title||'(Ï†úÎ™© ÏóÜÏùå)'}</span></div><button class="btn-section-delete" onclick="event.stopPropagation(); removeSection(${s.id})">&times;</button></div><div class="section-content">`;
            
            if(s.type === 'combined') {
                inner += `<div class="form-group"><label>Î†àÎ≤®</label><select onchange="updateSec(${s.id},'level',this.value)"><option value="1" ${s.level==1?'selected':''}>H1</option><option value="2" ${s.level==2?'selected':''}>H2</option><option value="3" ${s.level==3?'selected':''}>H3</option></select></div><div class="form-group"><label>Ï†úÎ™©</label><input type="text" value="${s.title}" onkeyup="updateSec(${s.id},'title',this.value)"></div><div class="form-group"><label>Ï∂ïÏïΩ Î¨∏Íµ¨</label><input type="text" value="${s.collapseLink}" onkeyup="updateSec(${s.id},'collapseLink',this.value)"></div><div class="form-group"><label>ÎÇ¥Ïö©</label><div class="text-toolbar"><button class="toolbar-btn" onclick="insFmt(${s.id},'bold')">B</button><button class="toolbar-btn" onclick="insFmt(${s.id},'color')">üé®</button><button class="toolbar-btn" onclick="insFmt(${s.id},'note')">üìù</button><button class="toolbar-btn" onclick="insFmt(${s.id},'bullet')">‚Ä¢</button><button class="toolbar-btn" onclick="insFmt(${s.id},'quote')">‚ùù</button></div><textarea id="content-${s.id}" onkeyup="updateSec(${s.id},'content',this.value)">${s.content}</textarea></div>`;
            } else if(s.type === 'image') {
                inner += `<div class="form-group"><label>ÌååÏùº</label><input type="file" onchange="handleImgUp(${s.id},this)"></div><div class="form-group"><label>URL</label><input type="text" value="${s.imageUrl}" onkeyup="updateSec(${s.id},'imageUrl',this.value)"></div><div class="form-group"><label>ÎÑàÎπÑ(px)</label><input type="number" value="${s.imageWidth}" onkeyup="updateSec(${s.id},'imageWidth',this.value)"></div>`;
            } else if(s.type === 'table') {
                inner += `<div class="form-group"><button class="btn btn-primary" style="width:100%" onclick="openTableModal(${s.id})">‚§¢ Ìëú Ìé∏ÏßëÍ∏∞ Ïó¥Í∏∞</button></div>`;
            }
            inner += `</div>`;
            div.innerHTML = inner;
            container.appendChild(div);
        }

        function updateSec(id, field, val) { const s = sections.find(x => x.id === id); if(s) { s[field] = val; if(field==='title') document.getElementById(`preview-title-${id}`).textContent = val||'(Ï†úÎ™© ÏóÜÏùå)'; updatePreview(); } }
        function removeSection(id) { sections = sections.filter(x => x.id !== id); document.getElementById(`section-${id}`).remove(); updatePreview(); }
        function insFmt(id, fmt) {
            const area = document.getElementById(`content-${id}`);
            const s = area.selectionStart, e = area.selectionEnd;
            const txt = area.value.substring(s, e);
            let rep = '';
            if(fmt==='bold') rep = `*${txt||'ÍµµÍ≤å'}*`;
            if(fmt==='color') rep = `[${txt||'ÎåÄÌëúÏÉâ'}]`;
            if(fmt==='note') rep = `{${txt||'Í∞ÅÏ£º'}}`;
            if(fmt==='bullet') rep = `- ${txt||'ÎÇ¥Ïö©'}`;
            if(fmt==='quote') rep = `> ${txt||'Ïù∏Ïö©'}`;
            area.value = area.value.substring(0,s) + rep + area.value.substring(e);
            updateSec(id, 'content', area.value);
        }
        function handleImgUp(id, input) {
            if(input.files[0]) {
                const r = new FileReader();
                r.onload = e => { const s = sections.find(x=>x.id===id); s.imageFile = e.target.result; updatePreview(); };
                r.readAsDataURL(input.files[0]);
            }
        }

        function openTableModal(id) { currentEditingTableId = id; renderTableModalContent(sections.find(x=>x.id===id)); document.getElementById('tableModal').classList.add('active'); }
        function closeTableModal() { document.getElementById('tableModal').classList.remove('active'); currentEditingTableId = null; }
        function saveTableFromModal() { updatePreview(); closeTableModal(); }

        function renderTableModalContent(s) {
            const con = document.getElementById('modalTableEditorContent');
            let html = `
                <div style="display:flex;gap:15px;margin-bottom:15px;background:white;padding:10px;border-radius:8px;border:1px solid #ddd;align-items:center">
                    <div><label style="margin-right:5px;font-weight:700">ÎÑàÎπÑ</label><input type="number" value="${s.tableData.width||700}" onchange="updTbl(${s.id},'width',this.value)" style="width:70px;padding:5px;border:1px solid #ccc"></div>
                    <div><label style="margin-right:5px;font-weight:700">Ïó¥</label><input type="number" value="${s.tableData.cols}" onchange="updTbl(${s.id},'cols',this.value)" style="width:50px;padding:5px;border:1px solid #ccc"></div>
                    <div><label style="margin-right:5px;font-weight:700">Ìñâ</label><input type="number" value="${s.tableData.rows}" onchange="updTbl(${s.id},'rows',this.value)" style="width:50px;padding:5px;border:1px solid #ccc"></div>
                </div>
                <div style="margin-bottom:10px;display:flex;gap:5px;flex-wrap:wrap;align-items:center;">
                    <button class="modal-btn primary" onclick="mergeCells(${s.id})">Î≥ëÌï©</button>
                    <button class="modal-btn secondary" onclick="toggleHeader(${s.id})">Ìó§Îçî</button>
                    <button class="modal-btn secondary" onclick="alignCell(${s.id},'left')">L</button>
                    <button class="modal-btn secondary" onclick="alignCell(${s.id},'center')">C</button>
                    <button class="modal-btn secondary" onclick="alignCell(${s.id},'right')">R</button>
                    <div style="display:inline-block;border-left:1px solid #ddd;margin:0 5px;height:20px;"></div>
                    <button class="modal-btn secondary" onclick="insertDivider(${s.id})">‚ûñ Íµ¨Î∂ÑÏÑ†</button>
                    <button class="modal-btn secondary" onclick="toggleEmojiList()">üòÄ Ïù¥Î™®ÏßÄ</button>
                    <div style="display:inline-block;border-left:1px solid #ddd;margin:0 5px;height:20px;"></div>
                    <button class="modal-btn danger" onclick="unmergeCells(${s.id})">Î≥ëÌï©Ìï¥Ï†ú</button>
                    <button class="modal-btn secondary" onclick="clearSel(${s.id})">ÏÑ†ÌÉùÌï¥Ï†ú</button>
                </div>
                
                <div id="emojiList" class="emoji-list">
                    <button class="emoji-btn" onclick="insertSpecificEmoji(${s.id}, 'üá∞üá∑')">üá∞üá∑</button>
                    <button class="emoji-btn" onclick="insertSpecificEmoji(${s.id}, 'üáØüáµ')">üáØüáµ</button>
                    <button class="emoji-btn" onclick="insertSpecificEmoji(${s.id}, 'üá®üá≥')">üá®üá≥</button>
                    <button class="emoji-btn" onclick="insertSpecificEmoji(${s.id}, 'üá∫üá∏')">üá∫üá∏</button>
                    <button class="emoji-btn" onclick="insertSpecificEmoji(${s.id}, 'üá¨üáß')">üá¨üáß</button>
                    <button class="emoji-btn" onclick="insertSpecificEmoji(${s.id}, 'üá´üá∑')">üá´üá∑</button>
                    <button class="emoji-btn" onclick="insertSpecificEmoji(${s.id}, 'üá©üá™')">üá©üá™</button>
                    <button class="emoji-btn" onclick="insertSpecificEmoji(${s.id}, 'üáÆüáπ')">üáÆüáπ</button>
                </div>

                <div style="font-size:12px;color:#666;margin-bottom:10px;margin-top:10px;">* Íµ¨Î∂ÑÏÑ† Î≤ÑÌäº ÎòêÎäî ~~~ ÏûÖÎ†• | Íµ≠Í∏∞ ÌÅ¥Î¶≠Ïãú ÏûÖÎ†•Îê®</div>
                <div style="display:grid;grid-template-columns:repeat(${s.tableData.cols},1fr);gap:4px">
            `;
            s.tableData.data.forEach((row, r) => {
                row.forEach((cell, c) => {
                    const key = `${r}-${c}`;
                    const isHead = s.tableData.cellStyles[key]?.isHeader;
                    const align = s.tableData.cellStyles[key]?.align || 'left';
                    const isImg = cell && cell.startsWith('<img');
                    html += `<div id="cell-${s.id}-${r}-${c}-wrap" onclick="togSel(${s.id},${r},${c})" style="border:2px solid transparent;padding:4px;border-radius:4px;background:${isHead?'#e8f5e9':'white'};box-shadow:0 1px 2px rgba(0,0,0,0.1);display:flex;flex-direction:column;gap:4px;cursor:pointer"><textarea id="textarea-${s.id}-${r}-${c}" onkeyup="updTblCell(${s.id},${r},${c},this.value)" onclick="event.stopPropagation()" style="width:100%;min-height:50px;border:1px solid #eee;resize:vertical;padding:4px;font-family:inherit;text-align:${align}">${isImg?'':cell}</textarea><button onclick="event.stopPropagation();addTblImg(${s.id},${r},${c})" style="align-self:flex-end;font-size:10px;padding:2px 6px;border:1px solid #ddd;background:white">üñºÔ∏è</button></div>`;
                });
            });
            html += '</div>';
            con.innerHTML = html;
        }

        function toggleEmojiList() {
            document.getElementById('emojiList').classList.toggle('show');
        }

        // ÏàòÏ†ïÎêú Ïù¥Î™®ÏßÄ ÏÇΩÏûÖ Ìï®Ïàò (ÏúàÎèÑÏö∞ Íµ≠Í∏∞ Î¨∏Ï†ú Ìï¥Í≤∞ÏùÑ ÏúÑÌï¥ Ïù¥ÎØ∏ÏßÄÎ°ú Î≥ÄÌôò)
        function insertSpecificEmoji(id, emoji) {
            const set = selCells.get(id);
            if(!set || set.size === 0) return alert('ÏÖÄÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.');
            const s = sections.find(x => x.id === id);

            const flagMap = {
                'üá∞üá∑': 'kr', 'üáØüáµ': 'jp', 'üá®üá≥': 'cn', 'üá∫üá∏': 'us', 
                'üá¨üáß': 'gb', 'üá´üá∑': 'fr', 'üá©üá™': 'de', 'üáÆüáπ': 'it'
            };

            set.forEach(k => {
                const [r, c] = k.split('-').map(Number);
                const current = s.tableData.data[r][c];
                
                let newVal;
                if (flagMap[emoji]) {
                    newVal = current + `<img src="https://flagcdn.com/h24/${flagMap[emoji]}.png" style="height:16px; vertical-align:middle; border:1px solid #eee; margin:0 2px;">`;
                } else {
                    newVal = current + emoji;
                }

                s.tableData.data[r][c] = newVal;
                document.getElementById(`textarea-${id}-${r}-${c}`).value = newVal;
            });
        }

        function insertDivider(id) {
            const set = selCells.get(id);
            if(!set || set.size === 0) return alert('ÏÖÄÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.');
            const s = sections.find(x => x.id === id);
            set.forEach(k => {
                const [r, c] = k.split('-').map(Number);
                s.tableData.data[r][c] = '~~~';
                document.getElementById(`textarea-${id}-${r}-${c}`).value = '~~~';
            });
        }

        function updTbl(id, type, val) {
            const s = sections.find(x=>x.id===id);
            if(type==='width') s.tableData.width = parseInt(val);
            else {
                const n = parseInt(val);
                if(type==='cols') { s.tableData.data = s.tableData.data.map(r => { while(r.length<n) r.push(''); return r.slice(0,n); }); s.tableData.cols = n; }
                if(type==='rows') { while(s.tableData.data.length<n) s.tableData.data.push(new Array(s.tableData.cols).fill('')); s.tableData.data = s.tableData.data.slice(0,n); s.tableData.rows = n; }
            }
            renderTableModalContent(s);
        }
        function updTblCell(id, r, c, val) { const s = sections.find(x=>x.id===id); if(!s.tableData.data[r][c].startsWith('<img')) s.tableData.data[r][c] = val; }
        function addTblImg(id, r, c) {
            const inp = document.createElement('input'); inp.type='file'; inp.accept='image/*';
            inp.onchange = e => { 
                const reader = new FileReader(); 
                reader.onload = ev => { const s=sections.find(x=>x.id===id); s.tableData.data[r][c] = `<img src="${ev.target.result}" style="max-width:150px;height:auto">`; renderTableModalContent(s); };
                reader.readAsDataURL(e.target.files[0]);
            };
            inp.click();
        }

        const selCells = new Map();
        function togSel(id, r, c) {
            if(!selCells.has(id)) selCells.set(id, new Set());
            const set = selCells.get(id); const k = `${r}-${c}`;
            const el = document.getElementById(`cell-${id}-${r}-${c}-wrap`);
            if(set.has(k)) { set.delete(k); el.style.border='2px solid transparent'; }
            else { set.add(k); el.style.border='2px solid var(--namu-green)'; }
        }
        function clearSel(id) { if(selCells.has(id)) { selCells.get(id).forEach(k => { const [r,c] = k.split('-'); document.getElementById(`cell-${id}-${r}-${c}-wrap`).style.border='2px solid transparent'; }); selCells.get(id).clear(); } }
        function toggleHeader(id) { const s = sections.find(x=>x.id===id); const set = selCells.get(id); if(!set||set.size===0) return alert('ÏÖÄ ÏÑ†ÌÉù ÌïÑÏöî'); set.forEach(k => { if(!s.tableData.cellStyles[k]) s.tableData.cellStyles[k]={}; s.tableData.cellStyles[k].isHeader = !s.tableData.cellStyles[k].isHeader; }); clearSel(id); renderTableModalContent(s); }
        function alignCell(id, align) { const s = sections.find(x=>x.id===id); const set = selCells.get(id); if(!set||set.size===0) return alert('ÏÖÄ ÏÑ†ÌÉù ÌïÑÏöî'); set.forEach(k => { if(!s.tableData.cellStyles[k]) s.tableData.cellStyles[k]={}; s.tableData.cellStyles[k].align = align; }); clearSel(id); renderTableModalContent(s); }
        function mergeCells(id) {
            const s = sections.find(x=>x.id===id); const set = selCells.get(id); if(!set||set.size<2) return alert('2Í∞ú Ïù¥ÏÉÅ ÏÑ†ÌÉù ÌïÑÏöî');
            const cells = Array.from(set).map(k=>{ const [r,c]=k.split('-').map(Number); return {r,c}; });
            const minR = Math.min(...cells.map(x=>x.r)), maxR = Math.max(...cells.map(x=>x.r)), minC = Math.min(...cells.map(x=>x.c)), maxC = Math.max(...cells.map(x=>x.c));
            if(cells.length !== (maxR-minR+1)*(maxC-minC+1)) return alert('ÏßÅÏÇ¨Í∞ÅÌòï ÏòÅÏó≠Îßå Î≥ëÌï© Í∞ÄÎä•');
            s.tableData.mergeInfo = s.tableData.mergeInfo.filter(m => !(m.r>=minR && m.r<=maxR && m.c>=minC && m.c<=maxC));
            s.tableData.mergeInfo.push({ r:minR, c:minC, rs:maxR-minR+1, cs:maxC-minC+1 });
            clearSel(id); renderTableModalContent(s);
        }
        function unmergeCells(id) { const s = sections.find(x=>x.id===id); const set = selCells.get(id); if(!set||set.size!==1) return alert('ÏÖÄ 1Í∞ú ÏÑ†ÌÉù ÌïÑÏöî'); const [r,c] = Array.from(set)[0].split('-').map(Number); const idx = s.tableData.mergeInfo.findIndex(m => r>=m.r && r<m.r+m.rs && c>=m.c && c<m.c+m.cs); if(idx===-1) return alert('Î≥ëÌï©Îêú ÏÖÄ ÏïÑÎãò'); s.tableData.mergeInfo.splice(idx,1); clearSel(id); renderTableModalContent(s); }

        // ÏàòÏ†ïÎêú ÌÖçÏä§Ìä∏ ÌååÏã± Ìï®Ïàò (Ï§ÑÎ∞îÍøà Î≤ÑÍ∑∏ Ìï¥Í≤∞)
        function parseText(txt) {
            if(!txt) return '';
            
            // Ïù∏Ïö©Î¨∏ Ï≤òÎ¶¨Î•º Î®ºÏ†Ä ÏàòÌñâÌïòÍ≥†, Î¨∏Ïû•Ïùò ÏãúÏûë(^)ÏóêÏÑúÎßå ÎèôÏûëÌïòÍ≤å Ìï¥ÏÑú ÌÉúÍ∑∏ Íº¨ÏûÑ Î∞©ÏßÄ
            txt = txt.replace(/^>\s*(.*)/gm, '<div style="background:#f8f9fa;border-left:4px solid var(--namu-green);padding:5px 10px;margin:5px 0;letter-spacing:normal">$1</div>');
            
            txt = txt.replace(/\*(.*?)\*/g, '<strong style="letter-spacing:normal">$1</strong>');
            txt = txt.replace(/\[(.*?)\]/g, '<span style="color:var(--namu-green);letter-spacing:normal">$1</span>'); 
            txt = txt.replace(/\{(.*?)\}/g, (m,c) => { footnotes.push(c); return `<sup style="color:var(--namu-green);cursor:help;letter-spacing:normal">[${footnotes.length}]</sup>`; });
            
            txt = txt.replace(/\n/g, '<br>');
            txt = txt.replace(/- (.*)/g, '‚Ä¢ $1');
            return txt;
        }

        function updatePreview() {
            const con = document.getElementById('dynamicContent'); con.innerHTML = ''; footnotes = [];
            const counters = [0,0,0,0]; let toc = '';
            sections.forEach(s => {
                let h = '';
                if(s.type === 'combined') {
                    if(s.title) {
                        const l = parseInt(s.level); counters[l]++; for(let i=l+1;i<4;i++) counters[i]=0;
                        let num = ''; for(let i=1;i<=l;i++) num += (num?'.':'') + counters[i];
                        const cls = l===1?'wiki-heading':(l===2?'wiki-heading-2':'wiki-heading-3');
                        h += `<div class="wiki-section"><h${l+1} class="${cls}" id="s-${num.replace(/\./g,'-')}"><span class="section-number">${num}.</span>${s.title}</h${l+1}></div>`;
                        toc += `<div class="toc-item toc-indent-${l}"><span class="toc-number">${num}.</span><span class="toc-text">${s.title}</span></div>`; 
                    }
                    if(s.collapseLink) {
                        h += `
                            <div class="wiki-collapse" style="padding: 12px 0; margin: 15px 0; display: flex; align-items: center; gap: 10px;">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" style="flex-shrink: 0; fill: #666;">
                                    <path d="M 6.5 2 C 5.1309372 2 4 3.1309372 4 4.5 L 4 19.5 C 4 20.869063 5.1309372 22 6.5 22 L 17.5 22 C 18.869063 22 20 20.869063 20 19.5 L 20 8 A 1.0001 1.0001 0 0 0 19.707031 7.2929688 L 14.707031 2.2929688 A 1.0001 1.0001 0 0 0 14 2 L 6.5 2 z M 6.5 4 L 13 4 L 13 8 A 1.0001 1.0001 0 0 0 14 9 L 18 9 L 18 19.5 C 18 19.786937 17.786937 20 17.5 20 L 6.5 20 C 6.2130628 20 6 19.786937 6 19.5 L 6 4.5 C 6 4.2130628 6.2130628 4 6.5 4 z M 15 5.4140625 L 16.585938 7 L 15 7 L 15 5.4140625 z M 9 10 A 1.0001 1.0001 0 1 0 9 12 L 15 12 A 1.0001 1.0001 0 1 0 15 10 L 9 10 z M 9 13 A 1.0001 1.0001 0 1 0 9 15 L 15 15 A 1.0001 1.0001 0 1 0 15 13 L 9 13 z M 9 16 A 1.0001 1.0001 0 1 0 9 18 L 13 18 A 1.0001 1.0001 0 1 0 13 16 L 9 16 z"></path>
                                </svg>
                                <span style="color: #222;">ÏûêÏÑ∏Ìïú ÎÇ¥Ïö©ÏùÄ <span style="color: var(--namu-green);">${s.collapseLink}</span> Î¨∏ÏÑúÎ•º Ï∞∏Í≥†ÌïòÏã≠ÏãúÏò§.</span>
                            </div>
                        `;
                    }
                    if(s.content) h += `<div class="wiki-text">${parseText(s.content)}</div>`;
                } else if(s.type === 'image') {
                    const src = s.imageFile || s.imageUrl; if(src) h += `<img src="${src}" class="wiki-image" style="width:${s.imageWidth?s.imageWidth+'px':'100%'}">`;
                } else if(s.type === 'table') {
                    const w = s.tableData.width || 700; let th = `<table class="wiki-table" style="max-width:${w}px"><tbody>`;
                    const skip = new Set();
                    s.tableData.data.forEach((row, r) => {
                        th += '<tr>';
                        row.forEach((cell, c) => {
                            if(skip.has(`${r}-${c}`)) return;
                            const m = s.tableData.mergeInfo.find(x => x.r===r && x.c===c);
                            let rs=1, cs=1;
                            if(m) { rs=m.rs; cs=m.cs; for(let i=r;i<r+rs;i++) for(let j=c;j<c+cs;j++) if(i!==r||j!==c) skip.add(`${i}-${j}`); }
                            const st = s.tableData.cellStyles[`${r}-${c}`] || {};
                            const tag = st.isHeader ? 'th' : 'td';
                            let content = cell;
                            
                            if(content.includes('~~~')) {
                                content = content.replace(/~~~/g, '<hr class="table-divider" style="border:0; border-top:1px solid #aaa; margin:5px 0;">');
                            }
                            if(!content.startsWith('<img') && !content.includes('<hr')) {
                                content = parseText(content);
                            }
                            
                            th += `<${tag} ${cs>1?'colspan="'+cs+'"':''} ${rs>1?'rowspan="'+rs+'"':''} style="text-align:${st.align||'left'}">${content}</${tag}>`;
                        });
                        th += '</tr>';
                    });
                    th += '</tbody></table>'; h += th;
                }
                con.innerHTML += h;
            });
            if(footnotes.length) {
                let fn = '<div class="wiki-footnotes">';
                footnotes.forEach((n,i) => fn += `<div class="footnote-item"><span style="color:var(--namu-green)">[${i+1}]</span> ${n}</div>`);
                fn += '</div>'; con.innerHTML += fn;
            }
            document.getElementById('tocList').innerHTML = toc || '<div style="color:#999;font-size:13px">Î™©Ï∞® ÏóÜÏùå</div>';
        }

        let draggedItem = null;
        function openReorderModal() {
            const list = document.getElementById('reorderList'); list.innerHTML = '';
            sections.forEach(s => {
                const li = document.createElement('li'); li.className='reorder-item'; li.draggable=true; li.dataset.id=s.id;
                li.innerHTML = `<span class="reorder-handle">‚â°</span> ${s.title||(s.type==='image'?'Ïù¥ÎØ∏ÏßÄ':(s.type==='table'?'Ìëú':'Ï†úÎ™© ÏóÜÏùå'))}`;
                li.addEventListener('dragstart', function() { draggedItem=this; this.style.opacity='0.5'; });
                li.addEventListener('dragover', e => e.preventDefault());
                li.addEventListener('drop', function() { if(draggedItem!==this) { const all = [...list.children]; const curIdx = all.indexOf(draggedItem), dropIdx = all.indexOf(this); if(curIdx < dropIdx) this.after(draggedItem); else this.before(draggedItem); } });
                li.addEventListener('dragend', function() { this.style.opacity='1'; });
                list.appendChild(li);
            });
            document.getElementById('reorderModal').classList.add('active');
        }
        function closeReorderModal() { document.getElementById('reorderModal').classList.remove('active'); }
        function saveReorder() {
            const newOrderIds = [...document.querySelectorAll('.reorder-item')].map(li => parseInt(li.dataset.id));
            const newSections = []; newOrderIds.forEach(id => { const s = sections.find(x => x.id === id); if(s) newSections.push(s); });
            sections = newSections; document.getElementById('sections-list').innerHTML = ''; sections.forEach(s => renderSectionEditor(s)); updatePreview(); closeReorderModal();
        }

        async function captureWiki(mode) {
            document.getElementById('captureMenu').classList.remove('open');
            const preview = document.getElementById('wiki-preview');
            const clone = preview.cloneNode(true);
            
            clone.style.width = '1000px';
            clone.style.position = 'fixed';
            clone.style.top = '0';
            clone.style.left = '0';
            clone.style.zIndex = '99999'; 
            clone.style.height = 'auto';
            clone.style.overflow = 'visible';
            clone.style.backgroundColor = 'white'; 
            
            const pBox = clone.querySelector('.profile-box');
            if(pBox) pBox.classList.add('capturing');

            document.body.appendChild(clone);

            const topArea = clone.querySelector('#capture-area-top');
            const bodyArea = clone.querySelector('.wiki-full-content');

            if(mode === 'top') { if(bodyArea) bodyArea.style.display = 'none'; }
            else if(mode === 'body') {
                const header = clone.querySelector('.wiki-header'); if(header) header.style.display='none';
                const meta = clone.querySelector('.wiki-meta'); if(meta) meta.style.display='none';
                const cat = clone.querySelector('#wikiCategories'); if(cat) cat.style.display='none';
                if(topArea) topArea.style.display='none';
            }

            try {
                await new Promise(resolve => setTimeout(resolve, 800));

                const canvas = await html2canvas(clone, {
                    backgroundColor: '#ffffff',
                    scale: 1, 
                    width: 1000,
                    windowWidth: 1200,
                    useCORS: true,
                    allowTaint: true,
                    logging: false,
                    scrollX: 0,
                    scrollY: 0
                });
                
                const link = document.createElement('a');
                link.download = `${document.getElementById('pageTitle').value}_${mode}.png`;
                link.href = canvas.toDataURL('image/png');
                link.click();
            } catch(e) { console.error(e); alert('Ï∫°Ï≤ò Ïã§Ìå®'); }
            finally {
                document.body.removeChild(clone);
            }
        }

        function saveWiki() {
            const data = {
                title: document.getElementById('pageTitle').value,
                cats: document.getElementById('categories').value,
                time: timeMode==='manual' ? document.getElementById('lastModified').value : null,
                intro: { img: document.getElementById('introImageUrl').value, en: document.getElementById('introGroupNameEn').value, ko: document.getElementById('introGroupNameKo').value, mems: document.getElementById('introMembers').value, color: document.getElementById('headerTextColor').value },
                profile: { img: document.getElementById('profileImageUrl').value, rows: profileRows, sns: { y: document.getElementById('snsYoutube').checked, x: document.getElementById('snsX').checked, i: document.getElementById('snsInstagram').checked } },
                sections: sections, theme: document.getElementById('themeColor').value
            };
            const b = new Blob([JSON.stringify(data)], {type:'application/json'});
            const u = URL.createObjectURL(b);
            const a = document.createElement('a'); a.href=u; a.download='wiki-data.json'; a.click();
        }

        function loadWiki() {
            const inp = document.createElement('input'); inp.type='file'; inp.accept='.json';
            inp.onchange = e => {
                const r = new FileReader();
                r.onload = ev => {
                    try {
                        const d = JSON.parse(ev.target.result);
                        document.getElementById('pageTitle').value = d.title || '';
                        document.getElementById('categories').value = d.cats || '';
                        if(d.time) { setTimeMode('manual'); document.getElementById('lastModified').value = d.time; } else setTimeMode('realtime');
                        document.getElementById('introImageUrl').value = d.intro.img||'';
                        document.getElementById('introGroupNameEn').value = d.intro.en||'';
                        document.getElementById('introGroupNameKo').value = d.intro.ko||'';
                        document.getElementById('introMembers').value = d.intro.mems||'';
                        document.getElementById('headerTextColor').value = d.intro.color||'#222';
                        document.getElementById('profileImageUrl').value = d.profile.img||'';
                        profileRows = d.profile.rows || [];
                        document.getElementById('snsYoutube').checked = d.profile.sns.y;
                        document.getElementById('snsX').checked = d.profile.sns.x;
                        document.getElementById('snsInstagram').checked = d.profile.sns.i;
                        sections = d.sections || [];
                        document.getElementById('themeColor').value = d.theme || '#2db400';
                        
                        document.getElementById('pageTitle').dispatchEvent(new Event('input'));
                        document.getElementById('introImageUrl').dispatchEvent(new Event('input'));
                        document.getElementById('profileImageUrl').dispatchEvent(new Event('input'));
                        document.getElementById('themeColor').dispatchEvent(new Event('input'));
                        document.getElementById('profile-rows-list').innerHTML = ''; profileRows.forEach(r => renderProfileRowEditor(r));
                        document.getElementById('sections-list').innerHTML = ''; sections.forEach(s => renderSectionEditor(s));
                        updatePreviewAll(); updatePreview(); alert('Î°úÎìú ÏôÑÎ£å');
                    } catch(e) { console.error(e); alert('ÌååÏùº Ïò§Î•ò'); }
                };
                r.readAsText(e.target.files[0]);
            };
            inp.click();
        }

        init();
        updatePreview();
        updatePreviewAll();
    </script>
</body>
</html>
